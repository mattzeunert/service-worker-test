<!DOCTYPE html>
<html>
    <body>
        Service worker test
        
        <script>
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('worker.js').then(
                    () => {
                    
                    },
                    err => {
                        console.error('SW registration failed!', err)
                    }
                )
            })
        </script>

        <script>
            (async function() {
                const startTime = new Date()
                while ((new Date().valueOf() - startTime.valueOf()) < 5000) {
                    console.log((new Date().valueOf() - startTime.valueOf()))
                    for (var i=0; i< 10000000;i++) {}
                    await new Promise(resolve => setTimeout(resolve, 30))
                }
            })()
        </script>
    </body>
</html>